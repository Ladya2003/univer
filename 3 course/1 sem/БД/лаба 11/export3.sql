--------------------------------------------------------
--  File created - среда-декабря-13-2023   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table CLIENTS
--------------------------------------------------------

  CREATE TABLE "SYS"."CLIENTS" 
   (	"CLIENTID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"FIRSTNAME" NVARCHAR2(50), 
	"LASTNAME" NVARCHAR2(50), 
	"EMAIL" NVARCHAR2(100), 
	"PHONENUMBER" NVARCHAR2(15), 
	"PASSWORD" NVARCHAR2(255), 
	"ADDRESS" NVARCHAR2(200)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table CATEGORIES
--------------------------------------------------------

  CREATE TABLE "SYS"."CATEGORIES" 
   (	"CATEGORYID" NUMBER GENERATED ALWAYS AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"CATEGORYNAME" NVARCHAR2(100), 
	"PARENTID" NUMBER, 
	"NODELEVEL" NUMBER, 
	"NODEPATH" NVARCHAR2(400)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table PRODUCTS
--------------------------------------------------------

  CREATE TABLE "SYS"."PRODUCTS" 
   (	"PRODUCTID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"CATEGORYID" NUMBER, 
	"PRODUCTNAME" NVARCHAR2(100), 
	"DESCRIPTION" NVARCHAR2(1000), 
	"PRICE" NUMBER(10,2), 
	"STOCKQUANTITY" NUMBER
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table ORDERS
--------------------------------------------------------

  CREATE TABLE "SYS"."ORDERS" 
   (	"ORDERID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"CLIENTID" NUMBER, 
	"ORDERDATE" DATE, 
	"ORDERAMOUNT" NUMBER(10,2), 
	"EMPLOYEEID" NUMBER
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table ORDEREDPRODUCTS
--------------------------------------------------------

  CREATE TABLE "SYS"."ORDEREDPRODUCTS" 
   (	"ORDERID" NUMBER, 
	"PRODUCTID" NUMBER, 
	"QUANTITY" NUMBER, 
	"TOTALCOST" NUMBER(10,2)
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
--------------------------------------------------------
--  DDL for Table REVIEWS
--------------------------------------------------------

  CREATE TABLE "SYS"."REVIEWS" 
   (	"REVIEWID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE  NOKEEP  NOSCALE , 
	"PRODUCTID" NUMBER, 
	"CLIENTID" NUMBER, 
	"REVIEWTEXT" NVARCHAR2(1000), 
	"RATING" NUMBER
   ) PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;
REM INSERTING into SYS.CLIENTS
SET DEFINE OFF;
Insert into SYS.CLIENTS (CLIENTID,FIRSTNAME,LASTNAME,EMAIL,PHONENUMBER,PASSWORD,ADDRESS) values ('1','Иван','Иванов','ivan@example.com','+71234567890','encryptedpassword1','Москва, ул. Ленина, 1');
Insert into SYS.CLIENTS (CLIENTID,FIRSTNAME,LASTNAME,EMAIL,PHONENUMBER,PASSWORD,ADDRESS) values ('2','Мария','Петрова','maria@example.com','+71234567891','encryptedpassword2','Санкт-Петербург, пр. Невский, 2');
Insert into SYS.CLIENTS (CLIENTID,FIRSTNAME,LASTNAME,EMAIL,PHONENUMBER,PASSWORD,ADDRESS) values ('21','Влад','Владов','vlad@example.com','+71234567890','encrypt123password1','Минск, ул. Ленина, 1');
REM INSERTING into SYS.CATEGORIES
SET DEFINE OFF;
Insert into SYS.CATEGORIES (CATEGORYID,CATEGORYNAME,PARENTID,NODELEVEL,NODEPATH) values ('1','SUVs',null,'0','/');
Insert into SYS.CATEGORIES (CATEGORYID,CATEGORYNAME,PARENTID,NODELEVEL,NODEPATH) values ('2','Convertibles',null,'0','/');
Insert into SYS.CATEGORIES (CATEGORYID,CATEGORYNAME,PARENTID,NODELEVEL,NODEPATH) values ('3','Седан',null,null,null);
Insert into SYS.CATEGORIES (CATEGORYID,CATEGORYNAME,PARENTID,NODELEVEL,NODEPATH) values ('4','Кроссовер',null,null,null);
Insert into SYS.CATEGORIES (CATEGORYID,CATEGORYNAME,PARENTID,NODELEVEL,NODEPATH) values ('5','Хэтчбек',null,null,null);
REM INSERTING into SYS.PRODUCTS
SET DEFINE OFF;
Insert into SYS.PRODUCTS (PRODUCTID,CATEGORYID,PRODUCTNAME,DESCRIPTION,PRICE,STOCKQUANTITY) values ('1','1','Toyota Camry','Седан, белого цвета, 2022 года выпуска','2000000','3');
Insert into SYS.PRODUCTS (PRODUCTID,CATEGORYID,PRODUCTNAME,DESCRIPTION,PRICE,STOCKQUANTITY) values ('2','2','Nissan Qashqai','Кроссовер, красного цвета, 2021 года выпуска','1500000','2');
Insert into SYS.PRODUCTS (PRODUCTID,CATEGORYID,PRODUCTNAME,DESCRIPTION,PRICE,STOCKQUANTITY) values ('3','3','Volkswagen Golf','Хэтчбек, синего цвета, 2020 года выпуска','1400000','4');
REM INSERTING into SYS.ORDERS
SET DEFINE OFF;
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('1','1',to_date('04.10.23','DD.MM.RR'),'2000000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('21','2',to_date('04.10.23','DD.MM.RR'),'20000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('23','21',to_date('04.10.23','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('45','21',to_date('02.02.22','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('46','21',to_date('02.08.23','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('47','21',to_date('02.10.22','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('61','1',to_date('15.11.23','DD.MM.RR'),'2000000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('62','2',to_date('15.11.23','DD.MM.RR'),'20000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('63','21',to_date('15.11.23','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('64','21',to_date('02.02.22','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('65','21',to_date('02.08.23','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('66','21',to_date('02.10.22','DD.MM.RR'),'400000',null);
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('67','1',to_date('01.01.23','DD.MM.RR'),'100','1');
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('68','2',to_date('02.01.23','DD.MM.RR'),'150','2');
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('69','2',to_date('02.01.23','DD.MM.RR'),'150','2');
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('70','2',to_date('14.11.23','DD.MM.RR'),'120','1');
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('71','2',to_date('15.11.23','DD.MM.RR'),'80','2');
Insert into SYS.ORDERS (ORDERID,CLIENTID,ORDERDATE,ORDERAMOUNT,EMPLOYEEID) values ('72','1',to_date('01.01.23','DD.MM.RR'),'100','1');
REM INSERTING into SYS.ORDEREDPRODUCTS
SET DEFINE OFF;
Insert into SYS.ORDEREDPRODUCTS (ORDERID,PRODUCTID,QUANTITY,TOTALCOST) values ('1','1','1','2000000');
Insert into SYS.ORDEREDPRODUCTS (ORDERID,PRODUCTID,QUANTITY,TOTALCOST) values ('21','2','1','20000');
Insert into SYS.ORDEREDPRODUCTS (ORDERID,PRODUCTID,QUANTITY,TOTALCOST) values ('23','3','2','800000');
REM INSERTING into SYS.REVIEWS
SET DEFINE OFF;
Insert into SYS.REVIEWS (REVIEWID,PRODUCTID,CLIENTID,REVIEWTEXT,RATING) values ('1','1','1','Отличный автомобиль, очень доволен покупкой!','5');
--------------------------------------------------------
--  Constraints for Table CLIENTS
--------------------------------------------------------

  ALTER TABLE "SYS"."CLIENTS" MODIFY ("CLIENTID" NOT NULL ENABLE);
  ALTER TABLE "SYS"."CLIENTS" MODIFY ("FIRSTNAME" NOT NULL ENABLE);
  ALTER TABLE "SYS"."CLIENTS" MODIFY ("LASTNAME" NOT NULL ENABLE);
  ALTER TABLE "SYS"."CLIENTS" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE "SYS"."CLIENTS" MODIFY ("PASSWORD" NOT NULL ENABLE);
  ALTER TABLE "SYS"."CLIENTS" ADD PRIMARY KEY ("CLIENTID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
  ALTER TABLE "SYS"."CLIENTS" ADD UNIQUE ("EMAIL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CATEGORIES
--------------------------------------------------------

  ALTER TABLE "SYS"."CATEGORIES" MODIFY ("CATEGORYID" NOT NULL ENABLE);
  ALTER TABLE "SYS"."CATEGORIES" MODIFY ("CATEGORYNAME" NOT NULL ENABLE);
  ALTER TABLE "SYS"."CATEGORIES" ADD PRIMARY KEY ("CATEGORYID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PRODUCTS
--------------------------------------------------------

  ALTER TABLE "SYS"."PRODUCTS" MODIFY ("PRODUCTID" NOT NULL ENABLE);
  ALTER TABLE "SYS"."PRODUCTS" MODIFY ("PRODUCTNAME" NOT NULL ENABLE);
  ALTER TABLE "SYS"."PRODUCTS" MODIFY ("PRICE" NOT NULL ENABLE);
  ALTER TABLE "SYS"."PRODUCTS" MODIFY ("STOCKQUANTITY" NOT NULL ENABLE);
  ALTER TABLE "SYS"."PRODUCTS" ADD PRIMARY KEY ("PRODUCTID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ORDERS
--------------------------------------------------------

  ALTER TABLE "SYS"."ORDERS" MODIFY ("ORDERID" NOT NULL ENABLE);
  ALTER TABLE "SYS"."ORDERS" MODIFY ("ORDERDATE" NOT NULL ENABLE);
  ALTER TABLE "SYS"."ORDERS" ADD PRIMARY KEY ("ORDERID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ORDEREDPRODUCTS
--------------------------------------------------------

  ALTER TABLE "SYS"."ORDEREDPRODUCTS" MODIFY ("QUANTITY" NOT NULL ENABLE);
  ALTER TABLE "SYS"."ORDEREDPRODUCTS" MODIFY ("TOTALCOST" NOT NULL ENABLE);
  ALTER TABLE "SYS"."ORDEREDPRODUCTS" ADD PRIMARY KEY ("ORDERID", "PRODUCTID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
--------------------------------------------------------
--  Constraints for Table REVIEWS
--------------------------------------------------------

  ALTER TABLE "SYS"."REVIEWS" MODIFY ("REVIEWID" NOT NULL ENABLE);
  ALTER TABLE "SYS"."REVIEWS" MODIFY ("REVIEWTEXT" NOT NULL ENABLE);
  ALTER TABLE "SYS"."REVIEWS" ADD CHECK (Rating BETWEEN 1 AND 5) ENABLE;
  ALTER TABLE "SYS"."REVIEWS" ADD PRIMARY KEY ("REVIEWID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table CATEGORIES
--------------------------------------------------------

  ALTER TABLE "SYS"."CATEGORIES" ADD CONSTRAINT "CATEGORIES_PARENT_FK" FOREIGN KEY ("PARENTID")
	  REFERENCES "SYS"."CATEGORIES" ("CATEGORYID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PRODUCTS
--------------------------------------------------------

  ALTER TABLE "SYS"."PRODUCTS" ADD FOREIGN KEY ("CATEGORYID")
	  REFERENCES "SYS"."CATEGORIES" ("CATEGORYID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ORDERS
--------------------------------------------------------

  ALTER TABLE "SYS"."ORDERS" ADD FOREIGN KEY ("CLIENTID")
	  REFERENCES "SYS"."CLIENTS" ("CLIENTID") ENABLE;
  ALTER TABLE "SYS"."ORDERS" ADD FOREIGN KEY ("EMPLOYEEID")
	  REFERENCES "SYS"."EMPLOYEES" ("EMPLOYEEID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ORDEREDPRODUCTS
--------------------------------------------------------

  ALTER TABLE "SYS"."ORDEREDPRODUCTS" ADD FOREIGN KEY ("ORDERID")
	  REFERENCES "SYS"."ORDERS" ("ORDERID") ENABLE;
  ALTER TABLE "SYS"."ORDEREDPRODUCTS" ADD FOREIGN KEY ("PRODUCTID")
	  REFERENCES "SYS"."PRODUCTS" ("PRODUCTID") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table REVIEWS
--------------------------------------------------------

  ALTER TABLE "SYS"."REVIEWS" ADD FOREIGN KEY ("PRODUCTID")
	  REFERENCES "SYS"."PRODUCTS" ("PRODUCTID") ENABLE;
  ALTER TABLE "SYS"."REVIEWS" ADD FOREIGN KEY ("CLIENTID")
	  REFERENCES "SYS"."CLIENTS" ("CLIENTID") ENABLE;
